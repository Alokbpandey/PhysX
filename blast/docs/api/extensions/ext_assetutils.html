<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Asset Utilities (NvBlastExtAssetUtils) &mdash; blast-sdk 5.0.6 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/omni-style.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/api-styles.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/mermaid-init.js"></script>
        <script src="../../../_static/design-tabs.js"></script>
        <script src="../../../_static/version.js"></script>
        <script src="../../../_static/social-media.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Asset Authoring (NvBlastExtAuthoring)" href="ext_authoring.html" />
    <link rel="prev" title="Stress Solver (NvBlastExtStress)" href="ext_stress.html" />
 


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >


<a href="../../../index.html">
  <img src="../../../_static/main_ov_logo_rect.png" class="logo" alt="Logo"/>
</a>

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_ll_users_guide.html">Low Level API (NvBlast)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_globals_users_guide.html">Globals API (NvBlastGlobals)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_hl_users_guide.html">High Level (Toolkit) API (NvBlastTk)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Extensions (NvBlastExt)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ext_shaders.html">Damage Shaders (NvBlastExtShaders)</a></li>
<li class="toctree-l2"><a class="reference internal" href="ext_stress.html">Stress Solver (NvBlastExtStress)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Asset Utilities (NvBlastExtAssetUtils)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#add-world-bonds">Add World Bonds</a></li>
<li class="toctree-l3"><a class="reference internal" href="#merge-assets">Merge Assets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#transform-in-place">Transform In-Place</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ext_authoring.html">Asset Authoring (NvBlastExtAuthoring)</a></li>
<li class="toctree-l2"><a class="reference internal" href="ext_serialization.html">Serialization (NvBlastExtSerialization)</a></li>
<li class="toctree-l2"><a class="reference internal" href="ext_tkserialization.html">BlastTk Serialization (NvBlastExtTkSerialization)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../definitions.html">Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../copyrights.html">Copyrights</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CHANGELOG.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../_build/docs/blast-sdk/latest/blast-sdk_api.html">API Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">blast-sdk</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">


<li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
  
    <li><a href="index.html">Extensions (NvBlastExt)</a> &raquo;</li>
<li>Asset Utilities (NvBlastExtAssetUtils)</li>

      <li class="wy-breadcrumbs-aside">
      </li>
<li class="wy-breadcrumbs-aside">

  <span>&nbsp;</span>
</li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="asset-utilities-nvblastextassetutils">
<span id="pageextassetutils"></span><h1>Asset Utilities (NvBlastExtAssetUtils)<a class="headerlink" href="#asset-utilities-nvblastextassetutils" title="Permalink to this headline"></a></h1>
<p>NvBlastExtAssetUtils provides simple utility functions for modifying NvBlastAsset objects.  Three functions are provided, described in the following sections.</p>
<section id="add-world-bonds">
<span id="addworldbonds"></span><h2>Add World Bonds<a class="headerlink" href="#add-world-bonds" title="Permalink to this headline"></a></h2>
<p>The function NvBlastExtAssetUtilsAddWorldBonds allows the user to create an asset from an existing asset, with the addition of new bonds that connect
support chunks to the world.  (See the documentation for NvBlastBondDesc.)</p>
<p>For example, given an asset called <em>oldAsset</em>,</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>const uint32_t worldBoundChunks[3] = { 1, 2, 3 };   // Chunks to bind to the world.  These must be support chunks.
const NvcVec3 bondDirections[3] = { { -1, 0, 1 }, { 0, 0, -1}, { 1, 0, 0 } };   // Normal directions for the new bonds.

// Create a new asset
NvBlastAsset* newAsset = NvBlastExtAssetUtilsAddWorldBonds(oldAsset, worldBoundChunks, 3, bondDirections, NULL);
</pre></div>
</div>
<p>Memory for the new asset is allocated using the allocator available through NvBlastGlobals (<a class="reference internal" href="../api_globals_users_guide.html#pageglobalsapi"><span class="std std-ref">Globals API (NvBlastGlobals)</span></a>).  Therefore the new asset may be freed using</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NVBLAST_FREE(newAsset);
</pre></div>
</div>
</section>
<section id="merge-assets">
<span id="mergeassets"></span><h2>Merge Assets<a class="headerlink" href="#merge-assets" title="Permalink to this headline"></a></h2>
<p>The NvBlastExtAssetUtilsMergeAssets function will combine any number of assets, generating an asset descriptor which may be passed to NvBlastCreateAsset.  This
is done in order to allow the user to make adjustments to the descriptor before creating the merged asset.</p>
<p>The geometric data in each asset to be merged may be transformed so that the assets will have desired relative poses.  In addition, the user may describe new
bonds, in order to join support chunks of two different assets and create a larger support graph which spans the entire combined asset.  The reference frame for
the new bonds’ geometric data is that of the new asset.</p>
<p>For example, if one wants to merge two wall assets together, with a relative translation between them of 10 units in the x-direction, the code might look something like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>const NvBlastAsset* components[2] = { asset0, asset1 }; // asset0 and asset1 are already created
const NvcVec3 translations[2] = { { -5, 0, 0 }, { 5, 0, 0 } };  // Translate asset0 -5 in x, and asset1 +5 in x

// New bonds:
const uint32_t newBondCount = ...   // Some number of new bonds
const NvBlastExtAssetUtilsBondDesc newBondDescs[newBondCount];
newBondDesc[0].bond.normal.x = 1;   // Normal in the +x direction, pointing from asset0 to asset1
newBondDesc[0].bond.normal.y = 0;
newBondDesc[0].bond.normal.z = 0;
newBondDesc[0].bond.area = 1;
newBondDesc[0].bond.centroid.x = 0;
newBondDesc[0].bond.centroid.y = 0;
newBondDesc[0].bond.centroid.z = 2.5;   // Position is in the middle, off the ground
newBondDesc[0].bond.userData = 0;
newBondDesc[0].chunkIndices[0] = 5;     // Connect from chunk[5] in components[componentIndices[0]]
newBondDesc[0].chunkIndices[1] = 13;    // .. to chunk[13] in  components[componentIndices[1]]
newBondDesc[0].componentIndices[0] = 0; // Connect asset in components[0]
newBondDesc[0].componentIndices[1] = 1; // .. to the asset in components[1]

// Create merged asset descriptor
NvBlastAssetDesc mergedDesc = NvBlastExtAssetUtilsMergeAssets(components, NULL, translations, 2, newBondDescs, newBondCount);
</pre></div>
</div>
<p>Note, we passed in NULL for the list of relative rotations, meaning no asset will be rotated.</p>
<p>Also note, the new bond descriptors can just as well apply to a single asset (by setting both component indices to the same index), allowing the user to create additional bonds within
a single asset if desired.</p>
<p>The chunk and bond arrays referenced by the returned NvBlastAssetDesc are allocated using the NvBlastGlobals allocator, and it is up to the user to free this memory when it is no
longer needed:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>NVBLAST_FREE(mergedDesc.chunkDescs);
NVBLAST_FREE(mergedDesc.bondDescs);
</pre></div>
</div>
</section>
<section id="transform-in-place">
<span id="transforminplace"></span><h2>Transform In-Place<a class="headerlink" href="#transform-in-place" title="Permalink to this headline"></a></h2>
<p>The NvBlastExtAssetTransformInPlace function will apply an affine transformation (given by scaling, rotation, translation components) to the geometric data within an asset.</p>
<p>To use this function, simply pass in an NvcVec3 pointer to represent scale (which may be non-uniform), an NvcQuat pointer to represent rotation, and an NvcVec3 pointer to
represent translation.  Any of these pointers may be NULL, in which case that transform component is implicitly considered to be the identity.  This transforms:</p>
<ul class="simple">
<li><p>Chunk centroids</p></li>
<li><p>Chunk volumes</p></li>
<li><p>Bond normals</p></li>
<li><p>Bond areas</p></li>
<li><p>Bond centroids</p></li>
</ul>
<p>The transformation of position vectors is done in the following order: scale, followed by rotation, followed by translation.</p>
<p>The transformation of normal vectors uses the cofactors of the scale matrix (diagonals given by {scale.y*scale.z, scale.z*scale.x, scale.x*scale.y}), followed by rotation.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2024, NVIDIA.
      <span class="lastupdated">Last updated on May 29, 2024.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 



</body>
</html>